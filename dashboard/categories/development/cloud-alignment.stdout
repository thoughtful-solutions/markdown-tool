{
  "feature": {
    "name": "Service Model Classification",
    "file": "cloud-alignment.md"
  },
  "scenarios": [
    {
      "name": "Report on service model distribution",
      "status": "passed",
      "steps": [
        {
          "status": "passed",
          "output": null,
          "stdout": "../dashboard/data/entra-id/entra.json\n",
          "stderr": null,
          "exit_code": 0,
          "keyword": "Given",
          "text": "an inventory of Entra ID services"
        },
        {
          "status": "passed",
          "output": null,
          "stdout": "{\n  \"saas_services\": [\n    {\n      \"serviceId\": \"svc-001\",\n      \"displayName\": \"Microsoft Office 365\",\n      \"appId\": \"00000003-0000-0000-c000-000000000000\",\n      \"servicePrincipalId\": \"a1a1a1a1-b2b2-c3c3-d4d4-e5e5e5e5e5e5\",\n      \"enabled\": true,\n      \"userCount\": 10,\n      \"tags\": [\n        \"Productivity\",\n        \"Core\"\n      ],\n      \"roles\": [\n        {\n          \"roleId\": \"f4f4f4f4-f4f4-f4f4-f4f4-f4f4f4f4f4f4\",\n          \"roleName\": \"Office 365 E3 License\",\n          \"roleValue\": \"E3_License\"\n        }\n      ],\n      \"groups\": [\n        {\n          \"groupId\": \"aaaaaaaa-0000-0000-0000-000000000001\",\n          \"groupName\": \"All Office 365 Users\",\n          \"assignedRoleId\": \"f4f4f4f4-f4f4-f4f4-f4f4-f4f4f4f4f4f4\"\n        }\n      ]\n    },\n    {\n      \"serviceId\": \"svc-002\",\n      \"displayName\": \"Atlassian JIRA\",\n      \"appId\": \"b1b2b3b4-c5c6-d7d8-e9e0-f1f2f3f4f5f6\",\n      \"servicePrincipalId\": \"b2b2b2b2-c3c3-d4d4-e5e5-f6f6f6f6f6f6\",\n      \"enabled\": true,\n      \"userCount\": 7,\n      \"tags\": [\n        \"Development\",\n        \"Project Management\"\n      ],\n      \"roles\": [\n        {\n          \"roleId\": \"c1c1c1c1-c1c1-c1c1-c1c1-c1c1c1c1c1c1\",\n          \"roleName\": \"JIRA User\",\n          \"roleValue\": \"jira.user\"\n        },\n        {\n          \"roleId\": \"d2d2d2d2-d2d2-d2d2-d2d2-d2d2d2d2d2d2\",\n          \"roleName\": \"JIRA Developer\",\n          \"roleValue\": \"jira.developer\"\n        }\n      ],\n      \"groups\": [\n        {\n          \"groupId\": \"bbbbbbbb-0000-0000-0000-000000000002\",\n          \"groupName\": \"JIRA Users\",\n          \"assignedRoleId\": \"c1c1c1c1-c1c1-c1c1-c1c1-c1c1c1c1c1c1\"\n        },\n        {\n          \"groupId\": \"bbbbbbbb-0000-0000-0000-000000000003\",\n          \"groupName\": \"JIRA Developers\",\n          \"assignedRoleId\": \"d2d2d2d2-d2d2-d2d2-d2d2-d2d2d2d2d2d2\"\n        }\n      ]\n    },\n    {\n      \"serviceId\": \"svc-003\",\n      \"displayName\": \"SAP ERP\",\n      \"appId\": \"d3d4d5d6-e7e8-f9f0-a1a2-b3b4b5b6b7b8\",\n      \"servicePrincipalId\": \"c3c3c3c3-d4d4-e5e5-f6f6-a7a7a7a7a7a7\",\n      \"enabled\": true,\n      \"userCount\": 4,\n      \"tags\": [\n        \"Finance\",\n        \"ERP\"\n      ],\n      \"roles\": [\n        {\n          \"roleId\": \"e1e1e1e1-e1e1-e1e1-e1e1-e1e1e1e1e1e1\",\n          \"roleName\": \"Expense Reporter\",\n          \"roleValue\": \"sap.expense.reporter\"\n        },\n        {\n          \"roleId\": \"f2f2f2f2-f2f2-f2f2-f2f2-f2f2f2f2f2f2\",\n          \"roleName\": \"Task Scheduler\",\n          \"roleValue\": \"sap.task.scheduler\"\n        }\n      ],\n      \"groups\": [\n        {\n          \"groupId\": \"cccccccc-0000-0000-0000-000000000004\",\n          \"groupName\": \"SAP Expense Submitters\",\n          \"assignedRoleId\": \"e1e1e1e1-e1e1-e1e1-e1e1-e1e1e1e1e1e1\"\n        }\n      ]\n    },\n    {\n      \"serviceId\": \"svc-004\",\n      \"displayName\": \"Microsoft Teams\",\n      \"appId\": \"cc15fd57-2c6c-4114-a894-1a395af5683c\",\n      \"servicePrincipalId\": \"d4d4d4d4-e5e5-f6f6-a7a7-b8b8b8b8b8b8\",\n      \"enabled\": true,\n      \"userCount\": 10,\n      \"tags\": [\n        \"Collaboration\"\n      ],\n      \"roles\": [],\n      \"groups\": [\n        {\n          \"groupId\": \"dddddddd-0000-0000-0000-000000000005\",\n          \"groupName\": \"Sales Department\"\n        },\n        {\n          \"groupId\": \"eeeeeeee-0000-0000-0000-000000000006\",\n          \"groupName\": \"Engineering Department\"\n        },\n        {\n          \"groupId\": \"ffffffff-0000-0000-0000-000000000007\",\n          \"groupName\": \"Finance Department\"\n        }\n      ]\n    }\n  ],\n  \"paas_iaas_services\": [],\n  \"local_devices\": [\n    {\n      \"deviceId\": \"22222222-2222-2222-2222-000000000001\",\n      \"deviceName\": \"INNOVATE-LT-ALICE\",\n      \"osType\": \"Windows 11 Enterprise\",\n      \"compliant\": true,\n      \"intuneManaged\": true,\n      \"primaryUser\": \"alice@my.corp.ms\"\n    }\n  ],\n  \"unclassified_items\": [\n    {\n      \"userId\": \"11111111-1111-1111-1111-000000000001\",\n      \"userPrincipalName\": \"alice@my.corp.ms\",\n      \"displayName\": \"Alice Smith\",\n      \"userType\": \"Member\",\n      \"accountEnabled\": true,\n      \"groupMemberships\": [\n        \"aaaaaaaa-0000-0000-0000-000000000001\",\n        \"bbbbbbbb-0000-0000-0000-000000000003\",\n        \"eeeeeeee-0000-0000-0000-000000000006\"\n      ],\n      \"serviceAccess\": [\n        \"svc-001\",\n        \"svc-002\",\n        \"svc-004\"\n      ]\n    },\n    {\n      \"userId\": \"11111111-1111-1111-1111-000000000002\",\n      \"userPrincipalName\": \"bob@my.corp.ms\",\n      \"displayName\": \"Bob Johnson\",\n      \"userType\": \"Member\",\n      \"accountEnabled\": true,\n      \"groupMemberships\": [\n        \"aaaaaaaa-0000-0000-0000-000000000001\",\n        \"bbbbbbbb-0000-0000-0000-000000000003\",\n        \"eeeeeeee-0000-0000-0000-000000000006\"\n      ],\n      \"serviceAccess\": [\n        \"svc-001\",\n        \"svc-002\",\n        \"svc-004\"\n      ]\n    },\n    {\n      \"userId\": \"11111111-1111-1111-1111-000000000003\",\n      \"userPrincipalName\": \"charlie@my.corp.ms\",\n      \"displayName\": \"Charlie Brown\",\n      \"userType\": \"Member\",\n      \"accountEnabled\": true,\n      \"groupMemberships\": [\n        \"aaaaaaaa-0000-0000-0000-000000000001\",\n        \"bbbbbbbb-0000-0000-0000-000000000002\",\n        \"dddddddd-0000-0000-0000-000000000005\"\n      ],\n      \"serviceAccess\": [\n        \"svc-001\",\n        \"svc-002\",\n        \"svc-004\"\n      ]\n    },\n    {\n      \"userId\": \"11111111-1111-1111-1111-000000000004\",\n      \"userPrincipalName\": \"diana@my.corp.ms\",\n      \"displayName\": \"Diana Prince\",\n      \"userType\": \"Member\",\n      \"accountEnabled\": true,\n      \"groupMemberships\": [\n        \"aaaaaaaa-0000-0000-0000-000000000001\",\n        \"bbbbbbbb-0000-0000-0000-000000000002\",\n        \"cccccccc-0000-0000-0000-000000000004\",\n        \"dddddddd-0000-0000-0000-000000000005\"\n      ],\n      \"serviceAccess\": [\n        \"svc-001\",\n        \"svc-002\",\n        \"svc-003\",\n        \"svc-004\"\n      ]\n    },\n    {\n      \"userId\": \"11111111-1111-1111-1111-000000000005\",\n      \"userPrincipalName\": \"eve@my.corp.ms\",\n      \"displayName\": \"Eve Moneypenny\",\n      \"userType\": \"Member\",\n      \"accountEnabled\": true,\n      \"groupMemberships\": [\n        \"aaaaaaaa-0000-0000-0000-000000000001\",\n        \"cccccccc-0000-0000-0000-000000000004\",\n        \"ffffffff-0000-0000-0000-000000000007\"\n      ],\n      \"serviceAccess\": [\n        \"svc-001\",\n        \"svc-003\",\n        \"svc-004\"\n      ]\n    },\n    {\n      \"userId\": \"11111111-1111-1111-1111-000000000006\",\n      \"userPrincipalName\": \"frank@my.corp.ms\",\n      \"displayName\": \"Frank Castle\",\n      \"userType\": \"Member\",\n      \"accountEnabled\": true,\n      \"groupMemberships\": [\n        \"aaaaaaaa-0000-0000-0000-000000000001\",\n        \"cccccccc-0000-0000-0000-000000000004\",\n        \"ffffffff-0000-0000-0000-000000000007\"\n      ],\n      \"serviceAccess\": [\n        \"svc-001\",\n        \"svc-003\",\n        \"svc-004\"\n      ]\n    },\n    {\n      \"userId\": \"11111111-1111-1111-1111-000000000007\",\n      \"userPrincipalName\": \"grace@my.corp.ms\",\n      \"displayName\": \"Grace Hopper\",\n      \"userType\": \"Member\",\n      \"accountEnabled\": false,\n      \"groupMemberships\": [\n        \"aaaaaaaa-0000-0000-0000-000000000001\",\n        \"ffffffff-0000-0000-0000-000000000007\"\n      ],\n      \"serviceAccess\": [\n        \"svc-001\",\n        \"svc-004\"\n      ]\n    },\n    {\n      \"userId\": \"11111111-1111-1111-1111-000000000008\",\n      \"userPrincipalName\": \"heidi@my.corp.ms\",\n      \"displayName\": \"Heidi Lamarr\",\n      \"userType\": \"Member\",\n      \"accountEnabled\": true,\n      \"groupMemberships\": [\n        \"aaaaaaaa-0000-0000-0000-000000000001\",\n        \"bbbbbbbb-0000-0000-0000-000000000003\",\n        \"eeeeeeee-0000-0000-0000-000000000006\"\n      ],\n      \"serviceAccess\": [\n        \"svc-001\",\n        \"svc-002\",\n        \"svc-004\"\n      ]\n    },\n    {\n      \"userId\": \"11111111-1111-1111-1111-000000000009\",\n      \"userPrincipalName\": \"ivan@my.corp.ms\",\n      \"displayName\": \"Ivan Drago\",\n      \"userType\": \"Member\",\n      \"accountEnabled\": true,\n      \"groupMemberships\": [\n        \"aaaaaaaa-0000-0000-0000-000000000001\",\n        \"bbbbbbbb-0000-0000-0000-000000000003\",\n        \"eeeeeeee-0000-0000-0000-000000000006\"\n      ],\n      \"serviceAccess\": [\n        \"svc-001\",\n        \"svc-002\",\n        \"svc-004\"\n      ]\n    },\n    {\n      \"userId\": \"11111111-1111-1111-1111-000000000010\",\n      \"userPrincipalName\": \"judy@my.corp.ms\",\n      \"displayName\": \"Judy Hopps\",\n      \"userType\": \"Member\",\n      \"accountEnabled\": true,\n      \"groupMemberships\": [\n        \"aaaaaaaa-0000-0000-0000-000000000001\",\n        \"bbbbbbbb-0000-0000-0000-000000000003\",\n        \"eeeeeeee-0000-0000-0000-000000000006\"\n      ],\n      \"serviceAccess\": [\n        \"svc-001\",\n        \"svc-002\",\n        \"svc-004\"\n      ]\n    },\n    {\n      \"groupId\": \"aaaaaaaa-0000-0000-0000-000000000001\",\n      \"groupName\": \"All Office 365 Users\",\n      \"groupType\": \"Security\",\n      \"memberCount\": 10,\n      \"assignedServices\": [\n        \"svc-001\"\n      ],\n      \"members\": [\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000001\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000002\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000003\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000004\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000005\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000006\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000007\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000008\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000009\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000010\"\n        }\n      ]\n    },\n    {\n      \"groupId\": \"bbbbbbbb-0000-0000-0000-000000000002\",\n      \"groupName\": \"JIRA Users\",\n      \"groupType\": \"Security\",\n      \"memberCount\": 2,\n      \"assignedServices\": [\n        \"svc-002\"\n      ],\n      \"members\": [\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000003\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000004\"\n        }\n      ]\n    },\n    {\n      \"groupId\": \"bbbbbbbb-0000-0000-0000-000000000003\",\n      \"groupName\": \"JIRA Developers\",\n      \"groupType\": \"Security\",\n      \"memberCount\": 5,\n      \"assignedServices\": [\n        \"svc-002\"\n      ],\n      \"members\": [\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000001\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000002\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000008\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000009\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000010\"\n        }\n      ]\n    },\n    {\n      \"groupId\": \"cccccccc-0000-0000-0000-000000000004\",\n      \"groupName\": \"SAP Expense Submitters\",\n      \"groupType\": \"Security\",\n      \"memberCount\": 3,\n      \"assignedServices\": [\n        \"svc-003\"\n      ],\n      \"members\": [\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000004\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000005\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000006\"\n        }\n      ]\n    },\n    {\n      \"groupId\": \"dddddddd-0000-0000-0000-000000000005\",\n      \"groupName\": \"Sales Department\",\n      \"groupType\": \"Microsoft 365\",\n      \"memberCount\": 2,\n      \"assignedServices\": [\n        \"svc-004\"\n      ],\n      \"members\": [\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000003\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000004\"\n        }\n      ]\n    },\n    {\n      \"groupId\": \"eeeeeeee-0000-0000-0000-000000000006\",\n      \"groupName\": \"Engineering Department\",\n      \"groupType\": \"Microsoft 365\",\n      \"memberCount\": 5,\n      \"assignedServices\": [\n        \"svc-004\"\n      ],\n      \"members\": [\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000001\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000002\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000008\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000009\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000010\"\n        }\n      ]\n    },\n    {\n      \"groupId\": \"ffffffff-0000-0000-0000-000000000007\",\n      \"groupName\": \"Finance Department\",\n      \"groupType\": \"Microsoft 365\",\n      \"memberCount\": 3,\n      \"assignedServices\": [\n        \"svc-004\"\n      ],\n      \"members\": [\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000005\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000006\"\n        },\n        {\n          \"userId\": \"11111111-1111-1111-1111-000000000007\"\n        }\n      ]\n    }\n  ]\n}\n",
          "stderr": null,
          "exit_code": 0,
          "keyword": "When",
          "text": "services are classified by their type"
        },
        {
          "status": "passed",
          "output": null,
          "stdout": "[\n  {\n    \"model\": \"SaaS\",\n    \"count\": 4\n  },\n  {\n    \"model\": \"PaaS/IaaS\",\n    \"count\": 0\n  },\n  {\n    \"model\": \"Local\",\n    \"count\": 1\n  },\n  {\n    \"model\": \"Unclassified (Users/Groups)\",\n    \"count\": 17\n  }\n]\n",
          "stderr": "Dashboard data written to C:\\Users\\msn\\source\\markdown-tool\\dashboard\\categories\\development/cloud-alignment.json\n",
          "exit_code": 0,
          "keyword": "Then",
          "text": "produce a JSON report of the counts for SaaS, PaaS/IaaS, and Local services"
        }
      ]
    }
  ],
  "summary": {
    "scenarios": {
      "total": 1,
      "passed": 1,
      "failed": 0
    },
    "steps": {
      "total": 3,
      "passed": 3,
      "failed": 0,
      "skipped": 0,
      "undefined": 0
    }
  }
}